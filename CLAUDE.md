# WorldGenTest 開発ガイドライン

このドキュメントは、WorldGenTestプロジェクトの開発に関するガイドライン、注意事項、今後の計画をまとめたものです。

## プロジェクト概要

WorldGenTestは、Architecturyフレームワークを使用したMinecraft Modの開発学習プロジェクトです。将来的な大規模Mod開発を想定し、様々な技術やパターンを検証することを目的としています。

## 技術選択の理由

### Architectury選択理由
- **マルチプラットフォーム対応**: Forge、NeoForge、Fabricに対応可能
- **コード共有**: プラットフォーム間でのコード重複を最小化
- **メンテナンス性**: 一つのコードベースで複数のプラットフォームをサポート
- **コミュニティサポート**: 活発な開発とアップデート

### ModDevGradle 2.0採用理由
- **シンプルな設定**: NeoGradleより簡潔なビルドスクリプト
- **安定性**: 2025年1月に安定版リリース
- **パフォーマンス**: より高速なビルド処理

## 開発方針

### コード品質
1. **可読性重視**: 分かりやすい変数名、クラス名を使用
2. **モジュール化**: 機能ごとに適切にクラスを分離
3. **ドキュメント**: 複雑な処理にはコメントを追加
4. **テスト**: 可能な限りテストコードを作成

### 機能実装
1. **段階的実装**: 小さな機能から始めて徐々に拡張
2. **バージョン管理**: 機能追加時は適切にコミット
3. **互換性**: 既存機能を壊さないよう注意
4. **パフォーマンス**: 重い処理は最適化を検討

## 実装済み機能

### ✅ 完了済み

#### プロジェクト基盤
- Architecturyマルチプラットフォーム設定
- Gradle設定（ModDevGradle 2.0）
- 基本的なModエントリーポイント
- クリエイティブタブ設定

#### カスタムブロック
- クリスタルブロック（発光ブロック）
- ブロックモデル、アイテムモデル
- 多言語対応（英語・日本語）

#### カスタムバイオーム
- Crystalline Caves（クリスタルの洞窟）
- バイオーム設定（温度、湿度、色彩）
- Mob生成設定
- 地形生成設定（洞窟、鉱石）

## 今後の機能拡張計画

### 🔄 短期計画（1-2週間）

#### レシピシステム
- [x] クリスタルブロックのクラフトレシピ（Minecraft 1.21.1対応完了）
- [ ] 精錬レシピ
- [ ] カスタムレシピタイプ

#### アイテム追加
- [ ] クリスタルの欠片（アイテム）
- [ ] クリスタルツール（剣、ピッケル）
- [ ] クリスタル防具

#### ワールド生成強化
- [ ] クリスタル鉱石
- [ ] 洞窟装飾（鍾乳石など）
- [ ] カスタム構造物

### 🎯 中期計画（1-2ヶ月）

#### エンティティ
- [ ] クリスタルゴーレム（友好Mob）
- [ ] クリスタルスパイダー（敵対Mob）
- [ ] カスタムエンティティレンダリング

#### 高度なワールド生成
- [ ] マルチバイオーム構造
- [ ] 地下都市生成
- [ ] ディメンション追加

#### GUI・ユーザーインターフェース
- [ ] クリスタル加工台（カスタムGUI）
- [ ] エナジーシステム
- [ ] 進捗システム

### 🚀 長期計画（3ヶ月以上）

#### 魔法システム
- [ ] クリスタルベースの魔法
- [ ] 呪文システム
- [ ] マナシステム

#### ネットワーク機能
- [ ] サーバー間通信
- [ ] プレイヤーデータ同期
- [ ] マルチプレイヤー対応強化

#### MOD連携
- [ ] JEI連携
- [ ] Curios API連携
- [ ] Applied Energistics連携

## 開発時の注意事項

### Minecraft 1.21.1での重要な変更点（2025年9月確認）
1. **リソースディレクトリ構造変更**:
   - `advancements` → `advancement` (単数形)
   - `recipes` → `recipe` (単数形)
   - この変更により従来の複数形ディレクトリは認識されない
2. **レシピフォーマット変更**:
   - 旧: `"G": {"item": "minecraft:glass"}`
   - 新: `"G": "minecraft:glass"` (簡潔な文字列形式)
3. **アドバンスメントフォーマット変更**:
   - 旧: `"items": ["minecraft:diamond"]` (配列)
   - 新: `"items": "minecraft:diamond"` (文字列)
4. **レシピカテゴリとアドバンスメントディレクトリは別概念**:
   - レシピのcategoryフィールド: `misc`, `building_blocks`, `decorations`等
   - アドバンスメントディレクトリ: `recipe/decorations/`, `recipe/food/`等

### Architecturyでの開発
1. **共通コード**: できるだけcommonモジュールに実装
2. **プラットフォーム固有**: 必要最小限に留める
3. **@ExpectPlatform**: プラットフォーム固有の処理で使用
4. **registries**: Architecturyの登録システムを活用
5. **リソース同期問題**: 必要に応じてcommonとplatform-specificモジュール両方にリソースを配置

### バージョン管理
1. **依存関係**: 定期的にバージョンアップデート
2. **Minecraft**: 新バージョンへの対応計画
3. **互換性**: 下位バージョンとの互換性検討

### パフォーマンス
1. **クライアント負荷**: レンダリング処理の最適化
2. **サーバー負荷**: ワールド生成の効率化
3. **メモリ使用量**: 不要なオブジェクト生成を避ける

### セキュリティ
1. **入力検証**: ユーザー入力は必ず検証
2. **権限管理**: 管理者機能の適切な制限
3. **データ保護**: プレイヤーデータの安全な処理

## 学習ポイント

このプロジェクトで学習・検証する技術領域：

### Minecraft Modding
- バイオーム生成とカスタマイズ
- ブロック・アイテムの実装パターン
- エンティティ作成とAI
- ワールド生成アルゴリズム

### Architectury Framework
- マルチプラットフォーム開発
- 共通コードとプラットフォーム固有コードの分離
- レジストリシステムの活用
- リソース管理

### ソフトウェア設計
- モジュラーアーキテクチャ
- プラグインシステム
- 設定管理
- テスト駆動開発

## リソース・参考資料

### 公式ドキュメント
- [Architectury Documentation](https://docs.architectury.dev/)
- [NeoForge Documentation](https://docs.neoforged.net/)
- [Minecraft Wiki](https://minecraft.wiki/)

### コミュニティ
- [Architectury Discord](https://discord.gg/architectury)
- [ModdingByKaupenjoe](https://courses.kaupenjoe.net/)
- [r/feedthebeast](https://reddit.com/r/feedthebeast)

### 開発ツール
- IntelliJ IDEA（推奨IDE）
- MCreator（ビジュアル開発）
- Blockbench（モデル作成）

## コミット・リリース方針

### コミットメッセージ
Conventional Commitsに従う：
- `feat:` 新機能追加
- `fix:` バグ修正
- `docs:` ドキュメント更新
- `refactor:` リファクタリング
- `test:` テスト追加・修正

### バージョニング
Semantic Versioningに従う：
- MAJOR: 非互換性のある変更
- MINOR: 後方互換性のある機能追加
- PATCH: 後方互換性のあるバグ修正

### リリースノート
各リリースで以下を記載：
- 新機能
- バグ修正
- 破壊的変更
- 既知の問題